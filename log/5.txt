ESP-ROM:esp32p4-eco2-20240710
BESP-ROM:esp32p4-eco2-20240710
Build:Jul 10 2024
rst:0x1 (POWERON),boot:0x30f (SPI_FAST_FLASH_BOOT)
SPI mode:DIO, clock div:1
load:0x4ff33ce0,len:0x1338
load:0x4ff29ed0,len:0x12f4
load:0x4ff2cbd0,len:0x35d4
entry 0x4ff29eda
I (26) boot: ESP-IDF v6.1-dev-1-gff97953b32 2nd stage bootloader
I (26) boot: compile time Nov  9 2025 19:16:50
I (26) boot: Multicore bootloader
I (29) boot: chip revision: v1.3
I (30) boot: efuse block revision: v0.3
I (34) boot.esp32p4: SPI Speed      : 80MHz
I (38) boot.esp32p4: SPI Mode       : DIO
I (41) boot.esp32p4: SPI Flash Size : 2MB
I (45) boot: Enabling RNG early entropy source...
I (50) boot: Partition Table:
I (52) boot: ## Label            Usage          Type ST Offset   Length
I (59) boot:  0 nvs              WiFi data        01 02 00009000 00006000
I (65) boot:  1 phy_init         RF data          01 01 0000f000 00001000
I (72) boot:  2 factory          factory app      00 00 00010000 00100000
I (78) boot:  3 coredump         Unknown data     01 03 00110000 00010000
I (86) boot: End of partition table
I (88) esp_image: segment 0: paddr=00010020 vaddr=40080020 size=3b928h (244008) map
I (138) esp_image: segment 1: paddr=0004b950 vaddr=30100000 size=00088h (   136) load
I (140) esp_image: segment 2: paddr=0004b9e0 vaddr=4ff00000 size=04638h ( 17976) load
I (147) esp_image: segment 3: paddr=00050020 vaddr=40000020 size=740a0h (475296) map
I (232) esp_image: segment 4: paddr=000c40c8 vaddr=4ff04638 size=0bd38h ( 48440) load
I (243) esp_image: segment 5: paddr=000cfe08 vaddr=4ff10380 size=03134h ( 12596) load
I (251) boot: Loaded app from partition at offset 0x10000
I (251) boot: Disabling RNG early entropy source...
I (263) hex_psram: ECC is enabled
I (264) hex_psram: vendor id    : 0x0d (AP)
I (264) hex_psram: Latency      : 0x01 (Fixed)
I (264) hex_psram: DriveStr.    : 0x00 (25 Ohm)
I (267) hex_psram: dev id       : 0x03 (generation 4)
I (272) hex_psram: density      : 0x07 (256 Mbit)
I (277) hex_psram: good-die     : 0x06 (Pass)
I (281) hex_psram: SRF          : 0x02 (Slow Refresh)
I (285) hex_psram: BurstType    : 0x00 ( Wrap)
I (290) hex_psram: BurstLen     : 0x03 (2048 Byte)
I (294) hex_psram: BitMode      : 0x01 (X16 Mode)
I (299) hex_psram: Readlatency  : 0x04 (14 cycles@Fixed)
I (304) hex_psram: DriveStrength: 0x00 (1/1)
I (308) MSPI Timing: Enter psram timing tuning
I (484) esp_psram: Found 32MB PSRAM device
I (484) esp_psram: Speed: 200MHz
I (485) hex_psram: psram CS IO is dedicated
I (485) cpu_start: Multicore app
I (498) cpu_start: GPIO 38 and 37 are used as console UART I/O pins
I (498) cpu_start: Pro cpu start user code
I (498) cpu_start: cpu freq: 360000000 Hz
I (500) app_init: Application information:
I (504) app_init: Project name:     sta2eth_p4_c6
I (508) app_init: App version:      95f0c25-dirty
I (513) app_init: Compile time:     Nov 11 2025 00:02:58
I (518) app_init: ELF file SHA256:  b8c3cf56f...
I (522) app_init: ESP-IDF:          v6.1-dev-1-gff97953b32
I (527) efuse_init: Min chip rev:     v0.1
I (531) efuse_init: Max chip rev:     v1.99
I (535) efuse_init: Chip rev:         v1.3
I (539) heap_init: Initializing. RAM available for dynamic allocation:
I (545) heap_init: At 4FF16F60 len 00024060 (144 KiB): RETENT_RAM
I (551) heap_init: At 4FF3AFC0 len 00004BF0 (18 KiB): RAM
I (556) heap_init: At 4FF40000 len 00060000 (384 KiB): RAM
I (562) heap_init: At 50108080 len 00007F80 (31 KiB): RTCRAM
I (567) heap_init: At 30100088 len 00001F78 (7 KiB): TCM
I (572) esp_psram: Adding pool of 28672K of PSRAM memory to heap allocator
I (579) spi_flash: detected chip: generic
I (582) spi_flash: flash io: dio
W (585) spi_flash: Detected size(16384k) larger than the size in the binary image header(2048k). Using the size in the binary image header.
I (597) host_init: ESP Hosted : Host chip_ip[18]
I (602) H_API: ESP-Hosted starting. Hosted_Tasks: prio:23, stack: 5120 RPC_task_stack: 5120
I (610) H_API: ** add_esp_wifi_remote_channels **
D (614) transport: Adding channel IF[1]: S[0] Tx[0x4ff3cb54] Rx[0x40024924]
--- 0x40024924: esp_wifi_remote_channel_rx at F:/esp/output/sta2eth-1/managed_components/espressif__esp_wifi_remote/esp_wifi_remote_net.c:20
V (621) mpool: Nonaligned
V (623) mpool: Create mempool 0x4ff17960 with block_size:1536
I (629) transport: Add ESP-Hosted channel IF[1]: S[0] Tx[0x40011912] Rx[0x40024924]
--- 0x40011912: transport_drv_sta_tx at F:/esp/output/sta2eth-1/managed_components/espressif__esp_hosted/host/drivers/transport/transport_drv.c:254
--- 0x40024924: esp_wifi_remote_channel_rx at F:/esp/output/sta2eth-1/managed_components/espressif__esp_wifi_remote/esp_wifi_remote_net.c:20
D (636) transport: Adding channel IF[2]: S[0] Tx[0x4ff3cb54] Rx[0x40024924]
--- 0x40024924: esp_wifi_remote_channel_rx at F:/esp/output/sta2eth-1/managed_components/espressif__esp_wifi_remote/esp_wifi_remote_net.c:20
V (643) mpool: Nonaligned
V (645) mpool: Create mempool 0x4ff179e0 with block_size:1536
I (650) transport: Add ESP-Hosted channel IF[2]: S[0] Tx[0x40011860] Rx[0x40024924]
--- 0x40011860: transport_drv_ap_tx at F:/esp/output/sta2eth-1/managed_components/espressif__esp_hosted/host/drivers/transport/transport_drv.c:284
--- 0x40024924: esp_wifi_remote_channel_rx at F:/esp/output/sta2eth-1/managed_components/espressif__esp_wifi_remote/esp_wifi_remote_net.c:20
sdio_mempool_create free:29537864 min-free:29537864 lfb-def:28835840 lfb-8bit:28835840

V (666) mpool: Create mempool 0x4ff18a00 with block_size:1536
D (671) SD_HOST: ctlr->dma_desc addr: 0x4ff18a80
D (676) SD_HOST: peripheral version 5342270a, hardware config 03c44c83
D (682) SD_HOST: using GPIO18 as clk pin
D (686) SD_HOST: using GPIO19 as cmd pin
D (689) SD_HOST: using GPIO14 as d0 pin
D (693) SD_HOST: using GPIO15 as d1 pin
D (696) SD_HOST: using GPIO16 as d2 pin
D (700) gpio: GPIO[17]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
D (708) H_SDIO_DRV: sdio bus init done
D (712) transport: Bus handle: 0x4ff155f4
D (715) RPC_WRAP: rpc_init
D (718) rpc_api: rpc_slaveif_init
I (721) esp_core_dump_flash: Init core dump to flash
V (725) partition: Loading the partition table
V (730) calculated md5: 0x4ff3ca58   91 79 c5 9a 53 26 2c 5d  d4 c5 49 db 5b 3e aa 73  |.y..S&,]..I.[>.s|
V (739) stored md5: 0x400c8090   91 79 c5 9a 53 26 2c 5d  d4 c5 49 db 5b 3e aa 73  |.y..S&,]..I.[>.s|
V (748) partition: Partition table MD5 verified
I (752) esp_core_dump_flash: Found partition 'coredump' @ 110000 65536 bytes
D (777) esp_core_dump_sha: Total length of hashed data: 17984
I (777) esp_core_dump_flash: Core dump data checksum is correct
I (777) esp_core_dump_flash: Found core dump 18016 bytes in flash @ 0x110000
I (784) H_SDIO_DRV: sdio_data_to_rx_buf_task started
I (788) main_task: Started on CPU0
I (792) esp_psram: Reserving pool of 32K of internal memory for DMA/internal allocations
I (799) main_task: Calling app_main()
I (803) sta2eth: ===========================================
I (808) sta2eth: STA2ETH L2 Bridge with Dynamic MAC Learning
I (814) sta2eth: ===========================================
I (825) sta2eth:
I (825) sta2eth: Step 0: Checking C6 firmware status...
I (825) sta2eth:
I (827) sta2eth: Waiting for C6 to complete initialization...
I (833) sta2eth: C6 boot sequence:
I (836) sta2eth:   - Hardware initialization
I (840) sta2eth:   - WiFi driver loading
I (843) sta2eth:   - SDIO communication setup
I (847) sta2eth:   - Ready for commands
I (851) sta2eth:
I (853) sta2eth: Giving C6 adequate time to boot (up to 15 seconds)...
I (2859) sta2eth: 
I (2859) sta2eth: Now checking C6 status:
I (2859) sta2eth:   - Verifying C6 presence
I (2859) sta2eth:   - Checking firmware version
I (2861) sta2eth:   - Validating P4-C6 compatibility
I (2866) sta2eth:
I (2867) c6_ota: ===========================================
I (2873) c6_ota: Checking C6 firmware status...
I (2877) c6_ota: ===========================================
I (2883) c6_ota: Allowing C6 initialization time: 15 seconds
I (2888) c6_ota: This ensures C6 firmware can properly boot and respond
I (2894) c6_ota: Checking if C6 firmware upgrade is needed...
I (2900) c6_ota: Minimum required version: 1.2.0
I (2904) c6_ota: Waiting for C6 to initialize and respond...
I (2909) c6_ota: Timeout: 15000 ms
I (2913) c6_ota: Attempt 1 to query C6 firmware version...
I (3018) c6_ota: C6 firmware version: 1.2.0
I (3018) c6_ota: C6 firmware version is compatible
I (3018) c6_ota: C6 firmware is compatible and responding
I (3020) sta2eth: ✓ C6 firmware check passed - version compatible
I (3026) sta2eth: ✓ C6 is present and working
I (3030) sta2eth: Proceeding with normal bridge initialization...
I (3036) sta2eth:
I (3038) sta2eth: Step 1: Initializing Ethernet (IP101 PHY)...
I (3086) esp_eth.netif.netif_glue: 30:ed:a0:e3:30:71
I (3086) esp_eth.netif.netif_glue: ethernet attached to netif
I (3087) sta2eth: Ethernet promiscuous mode enabled for MAC learning
I (5492) ethernet_init: Ethernet(IP101[31,52]) Started
I (5492) sta2eth: Ethernet Started
I (5493) ethernet_init: Ethernet(IP101[31,52]) Link Up
I (5494) ethernet_init: Ethernet(IP101[31,52]) HW Addr 30:ed:a0:e3:30:71
I (5500) sta2eth: Ethernet Link Up
I (5503) sta2eth: Ethernet initialized successfully
I (5508) sta2eth: Step 2: Waiting for Ethernet link and PC packet...
I (5514) sta2eth: Waiting for Ethernet link up...
I (5518) sta2eth: Ethernet link is up!
I (5522) sta2eth: Waiting for first packet from PC to learn MAC address...
I (5528) sta2eth: (Please ensure PC is connected and sending traffic)
I (5551) sta2eth: ===========================================
I (5551) sta2eth: PC MAC Address Learned!
I (5551) sta2eth: MAC: 18:84:c1:f8:f2:1d
I (5553) sta2eth: ===========================================
I (5558) sta2eth: PC MAC learned successfully!
I (5563) wifi_config_portal: WiFi credentials found in P4's NVS
I (5568) sta2eth: WiFi already provisioned, using saved credentials
I (5574) sta2eth: Reconfigure button monitoring started (GPIO2)
I (5580) sta2eth: Long press (2 seconds) to reset WiFi credentials
I (5586) sta2eth: Step 3: Initializing WiFi with PC MAC...
I (5591) transport: Attempt connection with slave: retry[0]
W (5596) H_SDIO_DRV: Reset slave using GPIO[54]
I (5600) os_wrapper_esp: GPIO [54] configured
I (7124) sdio_wrapper: SDIO master: Slot 1, Data-Lines: 4-bit Freq(KHz)[40000 KHz]
I (7124) sdio_wrapper: GPIOs: CLK[18] CMD[19] D0[14] D1[15] D2[16] D3[17] Slave_Reset[54]
I (7128) sdio_wrapper: Queues: Tx[20] Rx[20] SDIO-Rx-Mode[1]
I (7171) sdio_wrapper: Function 0 Blocksize: 512
I (7172) sdio_wrapper: Function 1 Blocksize: 512
I (7272) H_SDIO_DRV: Card init success, TRANSPORT_RX_ACTIVE
I (7272) transport: set_transport_state: 1
I (7272) transport: Waiting for esp_hosted slave to be ready
I (7284) H_SDIO_DRV: SDIO Host operating in STREAMING MODE
I (7284) H_SDIO_DRV: Open data path at slave
I (7284) H_SDIO_DRV: Starting SDIO process rx task
I (7289) H_SDIO_DRV: Received ESP_PRIV_IF type message
I (7294) transport: Received INIT event from ESP32 peripheral
I (7299) transport: EVENT: 12
I (7302) transport: Identified slave [esp32c6]
I (7306) transport: EVENT: 11
I (7309) transport: capabilities: 0xd
I (7312) transport: Features supported are:
I (7316) transport:      * WLAN
I (7318) transport:        - HCI over SDIO
I (7322) transport:        - BLE only
I (7325) transport: EVENT: 13
W (7328) transport: === ESP-Hosted Version Warning ===
Version on Host is NEWER than version on co-processor
RPC requests sent by host may encounter timeout errors
or may not be supported by co-processor
W (7346) transport: === ESP-Hosted Version Warning ===
I (7351) transport: ESP board type is : 13

I (7355) transport: Base transport is set-up, TRANSPORT_TX_ACTIVE
I (7361) H_API: Transport active
I (7364) transport: Slave chip Id[12]
I (7367) transport: raw_tp_dir[-], flow_ctrl: low[60] high[80]
I (7373) transport: transport_delayed_init
I (7376) esp_cli: Remove any existing deep_sleep cmd in cli
I (7382) esp_cli: Registering command: crash
I (7386) esp_cli: Registering command: reboot
I (7390) esp_cli: Registering command: mem-dump
I (7394) esp_cli: Registering command: task-dump
I (7398) esp_cli: Registering command: cpu-dump
I (7403) esp_cli: Registering command: heap-trace
I (7407) esp_cli: Registering command: sock-dump
I (7411) esp_cli: Registering command: host-power-save
I (7416) hci_stub_drv: Host BT Support: Disabled
I (7421) H_SDIO_DRV: Received INIT event
I (7424) H_SDIO_DRV: Event type: 0x22
I (7428) H_SDIO_DRV: Write thread started
I (7785) RPC_WRAP: --- ESP Event: Slave ESP Init ---
I (7898) sta2eth: Setting WiFi storage to RAM only (C6 won't save credentials)
I (7917) sta2eth: Setting WiFi STA MAC to PC MAC: 18:84:c1:f8:f2:1d
I (7927) sta2eth: WiFi STA assigned static IP: 169.254.0.2
I (8016) sta2eth: WiFi initialized with PC MAC
I (8016) sta2eth: Step 4: Configuring WiFi connection...
I (8017) wifi_config_portal: WiFi credentials loaded from P4's NVS: SSID=xinxin
I (8021) sta2eth: WiFi credentials loaded: SSID=xinxin
I (8023) RPC_WRAP: ESP Event: wifi station started
W (8149) rpc_rsp: Hosted RPC_Resp [0x21a], uid [6], resp code [12298]
I (8164) sta2eth: WiFi STA started, initiating connection...
I (8164) H_API: esp_wifi_remote_connect
I (8187) sta2eth: Waiting for WiFi connection...
I (11917) RPC_WRAP: ESP Event: Station mode: Disconnected
I (11918) H_API: esp_wifi_remote_connect
I (11933) sta2eth: Retry to connect to AP (attempt 1/5)
I (14338) RPC_WRAP: ESP Event: Station mode: Disconnected
I (14338) H_API: esp_wifi_remote_connect
I (14346) sta2eth: Retry to connect to AP (attempt 2/5)
I (17070) RPC_WRAP: ESP Event: Station mode: Connected
I (17071) esp_wifi_remote: esp_wifi_internal_reg_rxcb: sta: 0x4005e068
--- 0x4005e068: wifi_sta_receive at F:/esp/master/esp-idf/components/esp_wifi/src/wifi_netif.c:39
I (17071) sta2eth: WiFi Connected to AP
I (17074) sta2eth: WiFi connected successfully!
I (17078) sta2eth: Step 5: Creating L2 bridge...
I (17083) sta2eth: Added Ethernet port to bridge
I (17087) sta2eth: Added WiFi STA port to bridge
I (17091) esp_netif_br_glue: 18:84:c1:f8:f2:1d
I (17096) esp_netif_br_glue: bridge netif glue attached
I (17101) sta2eth: ===========================================
I (17106) sta2eth: Bridge Created Successfully!
I (17110) sta2eth: Configuration:
I (17113) sta2eth:   PC MAC:     18:84:c1:f8:f2:1d
I (17118) sta2eth:   WiFi MAC:   18:84:c1:f8:f2:1d
I (17122) sta2eth:   Bridge MAC: 18:84:c1:f8:f2:1d
I (17127) sta2eth: ===========================================
I (17132) sta2eth: Transparent L2 bridging now active!
I (17137) sta2eth: PC should be able to get DHCP and access network
I (17143) sta2eth:
I (17145) sta2eth: ===========================================
I (17151) sta2eth:   System Ready! Bridge is Operational
I (17156) sta2eth: ===========================================
I (17161) sta2eth: Active Features:
I (17164) sta2eth:   ✓ L2 Bridge (Ethernet ↔ WiFi)
I (17169) sta2eth:   ✓ Transparent bridging with PC MAC
I (17174) sta2eth:   ✓ WiFi Config Portal (SoftAP)
I (17179) sta2eth:   ✓ Reconfigure Button (GPIO2 - 2s press)
I (17185) sta2eth: ===========================================
I (17190) sta2eth:
I (113504) ethernet_init: Ethernet(IP101[31,52]) Link Down
W (113504) sta2eth: Ethernet Link Down
I (121504) ethernet_init: Ethernet(IP101[31,52]) Link Up
I (121504) ethernet_init: Ethernet(IP101[31,52]) HW Addr 30:ed:a0:e3:30:71
I (121504) sta2eth: Ethernet Link Up
E (121508) esp_netif_lwip: dhcp client start failed
